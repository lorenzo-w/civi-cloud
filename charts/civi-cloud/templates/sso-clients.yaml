apiVersion: v1
kind: Secret
metadata:
  name: civi-oidc-client
type: Opaque
data:
  secret: {{ "test" | b64enc }}
---
apiVersion: v1
kind: Secret
metadata:
  name: civi-saml-client
type: kubernetes.io/tls
data:
  tls.crt: {{ "test 2" | b64enc }}
  tls.key: {{ "test 2" | b64enc }}
---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: sso-clients
spec:
  interval: 5m
  chart:
    spec:
      chart: ./charts/connector
      sourceRef:
        kind: GitRepository
        name: domain-sso
        namespace: flux-system
  values:
    oidc:
      - id: civi-oidc
        redirectURIs:
          - http://localhost:8000
          - http://localhost:18000
        secretName: civi-oidc-client
    saml:
      - id: civi-saml
        redirectURIs:
          - https://example.com/path
        certSecretName: civi-saml-client
